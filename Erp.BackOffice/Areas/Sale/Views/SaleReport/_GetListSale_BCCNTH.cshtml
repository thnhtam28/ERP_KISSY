@using Erp.BackOffice.App_GlobalResources
@using Erp.BackOffice.Sale.Models
@using Erp.BackOffice.Helpers
@model List<Sale_BaoCaoCongNoTongHopViewModel>
    @{
        Layout = null;
        int index = 1;
    }

    <table id="cTable" class="table table-bordered">
        <thead>
            <tr class="" style="display:none">
                <th class="" colspan="12" style="text-align:center"><h4>BÁO CÁO CÔNG NỢ TỔNG HỢP TỪ @ViewBag.StartDate ĐẾN @ViewBag.EndDate</h4></th>
            </tr>
            <tr>
                <th style="width:5%;text-align:center">STT</th>
                <th style="width:12%;text-align:center">Ngày hóa đơn</th>
                <th style="width:20%;text-align:center">Số HĐ</th>
                <th style="width:12%;text-align:center">Trị giá công nợ gốc</th>
                <th style="width:12%;text-align:center">Trị giá còn phải thu</th>
                <th style="width:15%;text-align:center">Ngày phải thu</th>
                <th style="width:12%;text-align:center">Số ngày quá hạn</th>
                <th style="width:12%;text-align:center">Tên nhân viên</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var ii in Model)
            {
                foreach (var item in Model)
                {


                    <tr>
                        <td>
                            <span>@(index++)</span>
                        </td>
                        <td>@(item.CreatedDate)</td>
                        <td>@(item.MaChungTuGoc)</td>
                        <td style="text-align:right">@(CommonSatic.ToCurrencyStr(item.TotalAmount, null))</td>
                        <td style="text-align:right">@(CommonSatic.ToCurrencyStr(item.cnt, null))</td>
                        <td>@(item.NextPaymentDate)</td>
                        <td style="text-align:right">@(Common.PhanCachHangNgan(item.daytra))</td>
                        <td>@(item.SalerFullName)</td>
                    </tr>
                }
            }


        </tbody>
        <thead style="position:fixed;bottom: 80px; width: 60% ">
            <tr>
                <td colspan="3" style="text-align:right; width: 550px"><b>Tổng</b></td>
                <td style="text-align:right; width: 137px">@(CommonSatic.ToCurrencyStr(Model.Sum(x => x.TotalAmount), null))</td>
                <td style="text-align:right; width: 137px">@(CommonSatic.ToCurrencyStr(Model.Sum(x => x.cnt), null))</td>
                
            </tr>
        </thead>
    </table>
    
    <script src="~/Scripts/jquery.freezeheader.js"></script>
    <script>
        $(document).ready(function () {
            $("#cTable").freezeHeader({ 'offset': '30px' });
        })
    </script>
